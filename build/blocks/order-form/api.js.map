{"version":3,"file":"blocks/order-form/api.js","mappings":"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","sources":["webpack://@wp-mos/blocks/./src/blocks/order-form/api.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\n  let totalPrice = null;\n  let filesData = [];\n  let lastWrapperId = 0;\n  let totalPriceElm = null;\n\n  const loader = \"…\";\n  const formGroup = document.querySelector(\".form-group\");\n  const apiUrl = \"https://lasercut.internetguru.io/api/v2/analyze?id=mos\";\n\n  const orderForm = document.getElementById(\"mos-order-form\");\n\n  /** ****************************************************************************************** **/\n  // sof: init files data\n  /** ****************************************************************************************** **/\n  const initFilesData = (formGroupId, formGroup) => {\n    filesData[formGroupId] = {\n      formGroup: formGroup,\n      status: null,\n      lastMod: null,\n      material: null,\n      quantity: null,\n      file: null,\n      fileHash: null,\n      fileURL: null,\n      fileWidth: null,\n      fileHeight: null,\n      productPrice: null,\n      addedWrapper: false,\n      valid: false,\n    };\n  };\n\n  const formatPrice = (num) => {\n    return num.toLocaleString();\n  };\n\n  const formatSize = (num) => {\n    return Math.round(num);\n  };\n\n  const getValidFilesCnt = () => {\n    cnt = 0;\n    filesData.forEach((file) => {\n      if (file == null) {\n        return;\n      }\n      if (!file.valid) {\n        return;\n      }\n      cnt++;\n    });\n    return cnt;\n  };\n  /** ****************************************************************************************** **/\n\n  /** ****************************************************************************************** **/\n  // sof: blocks\n  /** ****************************************************************************************** **/\n  // close all blocks\n  const closeAllBlocks = (blocks) => {\n    blocks.forEach((block) => {\n      block.classList.add(\"disabled\");\n    });\n  };\n\n  // open first blocks\n  const openFirstBlock = (blocks) => {\n    blocks.forEach((block, index) => {\n      index !== 0\n        ? block.classList.add(\"disabled\")\n        : block.classList.remove(\"disabled\");\n    });\n  };\n\n  // close block\n  const closeBlock = (blocks, id) => {\n    blocks.forEach((block, index) => {\n      if (index === id) {\n        block.classList.add(\"disabled\");\n      } else if (index === id + 1) {\n        block.classList.remove(\"disabled\");\n      } else if (index === 2) {\n        block.classList.add(\"disabled\");\n      }\n    });\n  };\n  /** ****************************************************************************************** **/\n\n  /** ****************************************************************************************** **/\n  // sof: init form blocks\n  /** ****************************************************************************************** **/\n  const initFormBlocks = (formGroup) => {\n    const formBlocks = formGroup.querySelectorAll(\".form-block\");\n    const formUploadFile = formGroup.querySelector(\".form-file\");\n    const formSelectMaterial = formGroup.querySelector(\".form-select\");\n    const formQuantity = formGroup.querySelector(\".form-quantity\");\n\n    closeAllBlocks(formBlocks);\n    openFirstBlock(formBlocks);\n\n    formBlocks.forEach((block, index) => {\n      const blockHeader = block.querySelector(\".form-block-header\");\n\n      blockHeader.addEventListener(\"click\", (event) => {\n        event.preventDefault();\n        const { currentTarget } = event;\n\n        closeAllBlocks(formBlocks);\n\n        if (+currentTarget.id === index) {\n          block.classList.remove(\"disabled\");\n        } else {\n          block.classList.add(\"disabled\");\n        }\n      });\n    });\n\n    formUploadFile.addEventListener(\"change\", (event) => {\n      event.preventDefault();\n      closeBlock(formBlocks, +formUploadFile.dataset.id);\n    });\n\n    formSelectMaterial.addEventListener(\"change\", (event) => {\n      event.preventDefault();\n      closeBlock(formBlocks, +formSelectMaterial.dataset.id);\n    });\n\n    formQuantity.addEventListener(\"change\", (event) => {\n      event.preventDefault();\n      closeBlock(formBlocks, +formQuantity.dataset.id);\n    });\n  };\n\n  // FORM GROUP LISTENER\n  const addFileGroupListener = (formGroup, fileGroupId) => {\n    formGroup.addEventListener(\"change\", (event) => {\n      calculatePrice(fileGroupId);\n    });\n\n    initFormBlocks(formGroup);\n  };\n\n  const addFormGroup = (formGroup, fileGroupId) => {\n    let newWrapper = formGroup.cloneNode(true);\n    lastWrapperId++;\n    initFilesData(lastWrapperId, newWrapper);\n    newWrapper.setAttribute(\"data-filenum\", lastWrapperId);\n    newWrapper.querySelector(\".form-filestatus\").innerHTML = \"-\";\n    newWrapper.querySelector(\".form-file\").value = \"\";\n    newWrapper.querySelector(\".form-quantity\").value = 1;\n    newWrapper.querySelector(\".form-size\").innerHTML = \"-\";\n    formGroup.querySelector(\".form-wrapper\").insertAdjacentHTML(\n      \"beforeend\",\n      `<a class=\"form-del\" data-id=\"${fileGroupId}\" href=\"Javascript:void(0);\">\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path d=\"M6 18L18 6\" stroke=\"black\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          <path d=\"M18 18L6 6\" stroke=\"black\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        </svg>\n      </a>`\n    );\n    fileInput = formGroup.querySelector(\".form-file\");\n    fileName = document.createElement(\"p\");\n    fileName.className = \"mt-2 mb-0\";\n    fileName.innerHTML = fileInput.files[0].name;\n    fileInput.parentNode.replaceChild(fileName, fileInput);\n    formGroup.querySelector(\".form-del\").addEventListener(\"click\", (event) => {\n      filesData[event.currentTarget.getAttribute(\"data-id\")] = null;\n      formGroup.parentNode.removeChild(formGroup);\n      updateForm();\n    });\n    addFileGroupListener(newWrapper, lastWrapperId);\n    formGroup.parentNode.insertBefore(newWrapper, formGroup.nextElementSibling);\n  };\n\n  /** ****************************************************************************************** **/\n  // sof: update form\n  /** ****************************************************************************************** **/\n  const updateForm = (fileGroupId) => {\n    totalPrice = 0;\n    filesData.forEach((file) => {\n      if (file == null || file.prices == null) {\n        return;\n      }\n      if (\n        fileGroupId !== undefined &&\n        fileGroupId == file.formGroup.getAttribute(\"data-filenum\")\n      ) {\n        file.status.innerHTML = loader;\n      }\n      var materialSelect = file.formGroup.querySelector(\".form-material\");\n      if (materialSelect.children.length == 1) {\n        materialSelect.innerHTML = \"\";\n        file.prices.forEach((priceData) => {\n          var option = document.createElement(\"option\");\n          option.value = priceData.material_id;\n          option.innerHTML = `${priceData.material_name}`;\n          option.setAttribute(\"data-name\", priceData.material_name);\n          materialSelect.appendChild(option);\n        });\n      }\n      var quantity = file.formGroup.querySelector(\".form-quantity\").value;\n      var price =\n        file.prices[materialSelect.selectedIndex].unit_price * quantity +\n        file.prices[materialSelect.selectedIndex].fix_price;\n      setTimeout(() => {\n        file.status.innerHTML = `${formatPrice(price)} RON`;\n      }, 400);\n      width = formatSize(file.fileWidth);\n      height = formatSize(file.fileHeight);\n      file.formGroup.querySelector(\n        \".form-size\"\n      ).innerHTML = `${width} × ${height}`;\n\n      // show form details\n      file.formGroup\n        .querySelector(\".form-block-details\")\n        .classList.remove(\"hide\");\n\n      // add file name as title\n      file.formGroup.querySelector(\n        \".form-block-details-title\"\n      ).innerHTML = `${file.file.name}`;\n\n      // disable upload file button\n      file.formGroup\n        .querySelector(\".form-subscribe-button\")\n        .classList.add(\"disabled\");\n\n      // show total price\n      document.querySelector(\".form-price\").classList.remove(\"hide\");\n\n      // show submit\n      document.querySelector(\".form-submit-button\").classList.remove(\"hide\");\n\n      file.productPrice = price;\n      totalPrice += price;\n      file.material =\n        materialSelect[materialSelect.selectedIndex].getAttribute(\"data-name\");\n    });\n    totalPriceElm.innerHTML = `${formatPrice(totalPrice)} RON`;\n  };\n  /** ****************************************************************************************** **/\n\n  /** ****************************************************************************************** **/\n  // sof: calculate price\n  /** ****************************************************************************************** **/\n  const calculatePrice = (fileGroupId) => {\n    const formGroup = filesData[fileGroupId].formGroup;\n    const fileInputElement = formGroup.querySelector(\".form-file\");\n    const material = formGroup.querySelector(\".form-material\").value;\n    const materialName =\n      formGroup.querySelector(\".form-material\").selectedOptions[0].text;\n    const quantity = formGroup.querySelector(\".form-quantity\").value;\n    const status = formGroup.querySelector(\".form-filestatus\");\n    let file = null;\n    if (filesData[fileGroupId].file == null) {\n      if (!fileInputElement.value) {\n        status.innerHTML = \"Choose file\";\n        return false;\n      }\n      file = fileInputElement.files[0];\n    } else {\n      file = filesData[fileGroupId].file;\n    }\n    if (quantity < 1 || quantity > 200) {\n      status.innerHTML = \"Quantity must be between 1 and 200\";\n      return false;\n    }\n\n    const fileName = file.name;\n    const lastMod = file.lastModified + fileName;\n    filesData[fileGroupId].quantity = quantity;\n\n    if (filesData[fileGroupId].lastMod !== lastMod) {\n      filesData[fileGroupId].status = status;\n      filesData[fileGroupId].material = materialName;\n      filesData[fileGroupId].lastMod = lastMod;\n      var form = new FormData();\n      form.append(\"material\", material);\n      form.append(\"amount\", quantity);\n      if (\n        filesData[fileGroupId].valid &&\n        filesData[fileGroupId].fileHash !== null\n      ) {\n        form.append(\"hash\", filesData[fileGroupId].fileHash);\n      } else {\n        form.append(\"dxf_file\", file, fileName);\n      }\n      status.innerHTML = loader;\n\n      fetch(apiUrl, {\n        method: \"post\",\n        body: form,\n      })\n        .then(async (response) => {\n          if (response.ok) {\n            return response.json();\n          }\n          const text = await response.json();\n          throw new Error(text.message);\n        })\n        .then((result) => {\n          filesData[fileGroupId].prices = result.prices;\n          filesData[fileGroupId].materialPrices = result.prices;\n          filesData[fileGroupId].fileHash = result.file_hash;\n          filesData[fileGroupId].fileURL = result.filew_path;\n          filesData[fileGroupId].fileWidth = result.model_width;\n          filesData[fileGroupId].fileHeight = result.model_height;\n          filesData[fileGroupId].file = file;\n          filesData[fileGroupId].valid = true;\n          if (!filesData[fileGroupId].addedWrapper) {\n            addFormGroup(formGroup, fileGroupId);\n            filesData[fileGroupId].addedWrapper = true;\n          }\n          updateForm(fileGroupId);\n        })\n        .catch((error) => {\n          alert(error);\n          status.innerHTML = \"–\";\n          filesData[fileGroupId].lastMod = null;\n          filesData[fileGroupId].valid = false;\n        });\n      return;\n    }\n    filesData[fileGroupId].material = quantity;\n    filesData[fileGroupId].material = materialName;\n    updateForm(fileGroupId);\n    filesData[fileGroupId].valid = true;\n  };\n  /** ****************************************************************************************** **/\n\n  initFilesData(0, formGroup);\n  totalPriceElm = document.getElementById(\"order-price\");\n  addFileGroupListener(formGroup, 0);\n  formGroup.addEventListener(\"submit\", (event) => {\n    event.preventDefault();\n    if (getValidFilesCnt() == 0) {\n      return false;\n    }\n    var msg = document.querySelector(\".status-message\");\n    if (msg) {\n      msg.parentNode.removeChild(msg);\n    }\n  });\n\n  orderForm.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n\n    const formData = new FormData(orderForm);\n\n    filesData.forEach((data) => {\n      formData.append(\"price\", data.productPrice);\n    });\n\n    console.log(filesData);\n\n    var xhr = new XMLHttpRequest();\n    xhr.open(\"POST\", mos_auth_rest.order);\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState === 4) {\n        if (xhr.status === 200) {\n          var response = JSON.parse(xhr.responseText);\n          console.log(response);\n        } else {\n          console.log(\"error\");\n        }\n      }\n    };\n    xhr.send(formData);\n  });\n});\n"],"names":["document","addEventListener","totalPrice","filesData","lastWrapperId","totalPriceElm","loader","formGroup","querySelector","apiUrl","orderForm","getElementById","initFilesData","formGroupId","status","lastMod","material","quantity","file","fileHash","fileURL","fileWidth","fileHeight","productPrice","addedWrapper","valid","formatPrice","num","toLocaleString","formatSize","Math","round","getValidFilesCnt","cnt","forEach","closeAllBlocks","blocks","block","classList","add","openFirstBlock","index","remove","closeBlock","id","initFormBlocks","formBlocks","querySelectorAll","formUploadFile","formSelectMaterial","formQuantity","blockHeader","event","preventDefault","currentTarget","dataset","addFileGroupListener","fileGroupId","calculatePrice","addFormGroup","newWrapper","cloneNode","setAttribute","innerHTML","value","insertAdjacentHTML","fileInput","fileName","createElement","className","files","name","parentNode","replaceChild","getAttribute","removeChild","updateForm","insertBefore","nextElementSibling","prices","undefined","materialSelect","children","length","priceData","option","material_id","material_name","appendChild","price","selectedIndex","unit_price","fix_price","setTimeout","width","height","fileInputElement","materialName","selectedOptions","text","lastModified","form","FormData","append","fetch","method","body","then","response","ok","json","Error","message","result","materialPrices","file_hash","filew_path","model_width","model_height","catch","error","alert","msg","formData","data","console","log","xhr","XMLHttpRequest","open","mos_auth_rest","order","onreadystatechange","readyState","JSON","parse","responseText","send"],"sourceRoot":""}