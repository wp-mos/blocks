{"version":3,"file":"blocks/order-form/api.js","mappings":"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","sources":["webpack://@wp-mos/blocks/./src/blocks/order-form/api.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\n  let totalPrice = null;\n  let filesData = [];\n  let lastWrapperId = 0;\n  let totalPriceElm = null;\n\n  const loader = \"…\";\n  const formGroup = document.querySelector(\".form-group\");\n  const apiUrl = \"https://lasercut.internetguru.io/api/v2/analyze?id=mos\";\n\n  const orderForm = document.getElementById(\"mos-order-form\");\n\n  // UTILS\n  const initFilesData = (formGroupId, formGroup) => {\n    filesData[formGroupId] = {\n      formGroup: formGroup,\n      status: null,\n      lastMod: null,\n      material: null,\n      quantity: null,\n      file: null,\n      fileHash: null,\n      fileURL: null,\n      fileWidth: null,\n      fileHeight: null,\n      productPrice: null,\n      addedWrapper: false,\n      valid: false,\n    };\n  };\n\n  const formatPrice = (num) => {\n    return num.toLocaleString();\n  };\n\n  const formatSize = (num) => {\n    return Math.round(num);\n  };\n\n  const getValidFilesCnt = () => {\n    cnt = 0;\n    filesData.forEach((file) => {\n      if (file == null) {\n        return;\n      }\n      if (!file.valid) {\n        return;\n      }\n      cnt++;\n    });\n    return cnt;\n  };\n\n  // FRONTEND\n  const toggleFormBlocks = (formBlocks) => {\n    formBlocks.forEach((formBlock, index) => {\n      const formBlockHeader = formBlock.querySelector(\".form-block-header\");\n\n      let isOpen = false;\n\n      index === 0 ? (isOpen = true) : (isOpen = false);\n\n      formBlockHeader.addEventListener(\"click\", (event) => {\n        event.preventDefault();\n\n        formBlocks.forEach((block) => {\n          isOpen = false;\n          block.classList.add(\"disabled\");\n        });\n\n        !isOpen\n          ? formBlock.classList.remove(\"disabled\")\n          : formBlock.classList.add(\"disabled\");\n        isOpen = !isOpen;\n      });\n    });\n  };\n\n  const initFormBlocks = (formGroup) => {\n    const formBlocks = formGroup.querySelectorAll(\".form-block\");\n    const formFile = formGroup.querySelector(\".form-file\");\n    const formSelect = formGroup.querySelector(\".form-select\");\n\n    const el = [];\n\n    // init\n    formBlocks.forEach((formBlock, index) => {\n      if (index !== 0) {\n        formBlock.classList.add(\"disabled\");\n      } else {\n        el.push(formBlocks[0]);\n        toggleFormBlocks(el);\n      }\n    });\n\n    const closeAllFormBlocks = () => {\n      formBlocks.forEach((formBlock) => {\n        formBlock.classList.add(\"disabled\");\n      });\n    };\n\n    const openFormBlock = (id) => {\n      formBlocks.forEach((formBlock, index) => {\n        if (index === id) {\n          formBlock.classList.remove(\"disabled\");\n          console.log(\"disabled block\", id);\n        }\n      });\n    };\n\n    formFile.addEventListener(\"change\", (event) => {\n      if (event) {\n        closeAllFormBlocks();\n        openFormBlock(1);\n        el.push(formBlocks[1]);\n        toggleFormBlocks(el);\n      }\n    });\n\n    formSelect.addEventListener(\"change\", (event) => {\n      if (event) {\n        closeAllFormBlocks();\n        openFormBlock(2);\n        el.push(formBlocks[2]);\n        toggleFormBlocks(el);\n      }\n    });\n  };\n\n  // FORM GROUP LISTENER\n  const addFileGroupListener = (formGroup, fileGroupId) => {\n    formGroup.addEventListener(\"change\", (event) => {\n      calculatePrice(fileGroupId);\n    });\n\n    // const a = formGroup.querySelector(\".form-group-add\");\n    // a.addEventListener(\"click\", (event) => {\n    //   event.preventDefault;\n    //   addFormGroup(formGroup, fileGroupId);\n    // });\n\n    initFormBlocks(formGroup, fileGroupId);\n\n    formGroup\n      .querySelector(\".form-quantity\")\n      .addEventListener(\"keydown\", (event) => {\n        if (event.key === \"Enter\") {\n          calculatePrice(fileGroupId);\n          event.preventDefault();\n        }\n        if (event.keyCode == 9) {\n          calculatePrice(fileGroupId);\n        }\n      });\n  };\n\n  const addFormGroup = (formGroup, fileGroupId) => {\n    let newWrapper = formGroup.cloneNode(true);\n    lastWrapperId++;\n    initFilesData(lastWrapperId, newWrapper);\n    newWrapper.setAttribute(\"data-filenum\", lastWrapperId);\n    newWrapper.querySelector(\".form-filestatus\").innerHTML = \"–\";\n    newWrapper.querySelector(\".form-file\").value = \"\";\n    newWrapper.querySelector(\".form-quantity\").value = 1;\n    newWrapper.querySelector(\".form-size\").innerHTML = \"–\";\n    formGroup.querySelector(\".form-wrapper\").insertAdjacentHTML(\n      \"beforeend\",\n      `<a class=\"form-del\" data-id=\"${fileGroupId}\" href=\"Javascript:void(0);\">\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <path d=\"M6 18L18 6\" stroke=\"black\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          <path d=\"M18 18L6 6\" stroke=\"black\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        </svg>\n      </a>`\n    );\n    fileInput = formGroup.querySelector(\".form-file\");\n    fileName = document.createElement(\"p\");\n    fileName.className = \"mt-2 mb-0\";\n    fileName.innerHTML = fileInput.files[0].name;\n    fileInput.parentNode.replaceChild(fileName, fileInput);\n    formGroup.querySelector(\".form-del\").addEventListener(\"click\", (event) => {\n      filesData[event.currentTarget.getAttribute(\"data-id\")] = null;\n      formGroup.parentNode.removeChild(formGroup);\n      updateForm();\n    });\n    addFileGroupListener(newWrapper, lastWrapperId);\n    formGroup.parentNode.insertBefore(newWrapper, formGroup.nextElementSibling);\n  };\n\n  const updateForm = (fileGroupId) => {\n    totalPrice = 0;\n    filesData.forEach((file) => {\n      if (file == null || file.prices == null) {\n        return;\n      }\n      if (\n        fileGroupId !== undefined &&\n        fileGroupId == file.formGroup.getAttribute(\"data-filenum\")\n      ) {\n        file.status.innerHTML = loader;\n      }\n      var materialSelect = file.formGroup.querySelector(\".form-material\");\n      if (materialSelect.children.length == 1) {\n        materialSelect.innerHTML = \"\";\n        file.prices.forEach((priceData) => {\n          var option = document.createElement(\"option\");\n          option.value = priceData.material_id;\n          option.innerHTML = `${priceData.material_name}`;\n          option.setAttribute(\"data-name\", priceData.material_name);\n          materialSelect.appendChild(option);\n        });\n      }\n      var quantity = file.formGroup.querySelector(\".form-quantity\").value;\n      var price =\n        file.prices[materialSelect.selectedIndex].unit_price * quantity +\n        file.prices[materialSelect.selectedIndex].fix_price;\n      setTimeout(() => {\n        file.status.innerHTML = `${formatPrice(price)} RON`;\n      }, 400);\n      width = formatSize(file.fileWidth);\n      height = formatSize(file.fileHeight);\n      file.formGroup.querySelector(\n        \".form-size\"\n      ).innerHTML = `${width} × ${height}`;\n\n      // show form details\n      file.formGroup\n        .querySelector(\".form-block-details\")\n        .classList.remove(\"hide\");\n\n      // add file name as title\n      file.formGroup.querySelector(\n        \".form-block-details-title\"\n      ).innerHTML = `${file.file.name}`;\n\n      // show total price\n      document.querySelector(\".form-price\").classList.remove(\"hide\");\n\n      // show submit\n      document.querySelector(\".form-submit-button\").classList.remove(\"hide\");\n\n      file.productPrice = price;\n      totalPrice += price;\n      file.material =\n        materialSelect[materialSelect.selectedIndex].getAttribute(\"data-name\");\n    });\n    totalPriceElm.innerHTML = `${formatPrice(totalPrice)} RON`;\n  };\n\n  const calculatePrice = (fileGroupId) => {\n    const formGroup = filesData[fileGroupId].formGroup;\n    const fileInputElement = formGroup.querySelector(\".form-file\");\n    const material = formGroup.querySelector(\".form-material\").value;\n    const materialName =\n      formGroup.querySelector(\".form-material\").selectedOptions[0].text;\n    const quantity = formGroup.querySelector(\".form-quantity\").value;\n    const status = formGroup.querySelector(\".form-filestatus\");\n    let file = null;\n    if (filesData[fileGroupId].file == null) {\n      if (!fileInputElement.value) {\n        status.innerHTML = \"Choose file\";\n        return false;\n      }\n      file = fileInputElement.files[0];\n    } else {\n      file = filesData[fileGroupId].file;\n    }\n    if (quantity < 1 || quantity > 100) {\n      status.innerHTML = \"Quantity must be between 1 and 100\";\n      return false;\n    }\n    const fileName = file.name;\n    const lastMod = file.lastModified + fileName;\n    filesData[fileGroupId].quantity = quantity;\n    if (filesData[fileGroupId].lastMod !== lastMod) {\n      filesData[fileGroupId].status = status;\n      filesData[fileGroupId].material = materialName;\n      filesData[fileGroupId].lastMod = lastMod;\n      var form = new FormData();\n      form.append(\"material\", material);\n      form.append(\"amount\", quantity);\n      if (\n        filesData[fileGroupId].valid &&\n        filesData[fileGroupId].fileHash !== null\n      ) {\n        form.append(\"hash\", filesData[fileGroupId].fileHash);\n      } else {\n        form.append(\"dxf_file\", file, fileName);\n      }\n      status.innerHTML = loader;\n\n      fetch(apiUrl, {\n        method: \"post\",\n        body: form,\n      })\n        .then((response) => {\n          if (response.ok) {\n            return response.json();\n          }\n          return response.json().then((text) => {\n            throw new Error(text.message);\n          });\n        })\n        .then((result) => {\n          filesData[fileGroupId].prices = result.prices;\n          filesData[fileGroupId].materialPrices = result.prices;\n          filesData[fileGroupId].fileHash = result.file_hash;\n          filesData[fileGroupId].fileURL = result.filew_path;\n          filesData[fileGroupId].fileWidth = result.model_width;\n          filesData[fileGroupId].fileHeight = result.model_height;\n          filesData[fileGroupId].file = file;\n          filesData[fileGroupId].valid = true;\n          if (!filesData[fileGroupId].addedWrapper) {\n            // addFormGroup(formGroup, fileGroupId);\n            filesData[fileGroupId].addedWrapper = true;\n          }\n          updateForm(fileGroupId);\n        })\n        .catch((error) => {\n          alert(error);\n          status.innerHTML = \"–\";\n          filesData[fileGroupId].lastMod = null;\n          filesData[fileGroupId].valid = false;\n        });\n      return;\n    }\n    filesData[fileGroupId].material = quantity;\n    filesData[fileGroupId].material = materialName;\n    updateForm(fileGroupId);\n    filesData[fileGroupId].valid = true;\n  };\n\n  function saveFormData(form) {\n    const formData = new FormData(form);\n    for (let [name, value] of formData) {\n      var label = document.querySelector(`label[for=\"${name}\"]`).innerHTML;\n      // customer.push({ key: name, value: value, label: label });\n      const varname = document\n        .getElementById(name)\n        .getAttribute(\"data-varname\");\n      if (varname) {\n        window[varname] = value;\n      }\n    }\n  }\n\n  initFilesData(0, formGroup);\n  totalPriceElm = document.getElementById(\"order-price\");\n  addFileGroupListener(formGroup, 0);\n  formGroup.addEventListener(\"submit\", (event) => {\n    event.preventDefault();\n    if (getValidFilesCnt() == 0) {\n      return false;\n    }\n    var msg = document.querySelector(\".status-message\");\n    if (msg) {\n      msg.parentNode.removeChild(msg);\n    }\n  });\n\n  orderForm.addEventListener(\"submit\", (event) => {\n    event.preventDefault();\n\n    const formData = new FormData(orderForm);\n\n    filesData.forEach((data) => {\n      formData.append(\"price\", data.productPrice);\n    });\n\n    console.log(formData);\n  });\n});\n"],"names":["document","addEventListener","totalPrice","filesData","lastWrapperId","totalPriceElm","loader","formGroup","querySelector","apiUrl","orderForm","getElementById","initFilesData","formGroupId","status","lastMod","material","quantity","file","fileHash","fileURL","fileWidth","fileHeight","productPrice","addedWrapper","valid","formatPrice","num","toLocaleString","formatSize","Math","round","getValidFilesCnt","cnt","forEach","toggleFormBlocks","formBlocks","formBlock","index","formBlockHeader","isOpen","event","preventDefault","block","classList","add","remove","initFormBlocks","querySelectorAll","formFile","formSelect","el","push","closeAllFormBlocks","openFormBlock","id","console","log","addFileGroupListener","fileGroupId","calculatePrice","key","keyCode","addFormGroup","newWrapper","cloneNode","setAttribute","innerHTML","value","insertAdjacentHTML","fileInput","fileName","createElement","className","files","name","parentNode","replaceChild","currentTarget","getAttribute","removeChild","updateForm","insertBefore","nextElementSibling","prices","undefined","materialSelect","children","length","priceData","option","material_id","material_name","appendChild","price","selectedIndex","unit_price","fix_price","setTimeout","width","height","fileInputElement","materialName","selectedOptions","text","lastModified","form","FormData","append","fetch","method","body","then","response","ok","json","Error","message","result","materialPrices","file_hash","filew_path","model_width","model_height","catch","error","alert","saveFormData","formData","label","varname","window","msg","data"],"sourceRoot":""}