document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".open-modal"),t=document.querySelector(".wp-block-mos-blocks-auth-modal"),a=document.querySelectorAll(".modal-overlay, .modal-btn-close");e.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),t.classList.add("modal-show")}))})),a.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),t.classList.remove("modal-show")}))}));const s=document.querySelectorAll(".tabs a"),n=document.querySelector("#signin-tab"),o=document.querySelector("#signup-tab");s.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),s.forEach((e=>{e.classList.remove("active-tab")})),e.currentTarget.classList.add("active-tab"),"#signin-tab"===e.currentTarget.getAttribute("href")?(n.style.display="block",o.style.display="none"):(n.style.display="none",o.style.display="block")}))})),o?.addEventListener("submit",(async e=>{e.preventDefault();const t=o.querySelector("fieldset");t.setAttribute("disabled",!0);const a=o.querySelector("#signup-status");a.innerHTML='\n      <div class="modal-status modal-status-info">\n        Please wait! We are creating your account.\n      </div>\n    ';const s={username:o.querySelector("#su-name").value,email:o.querySelector("#su-email").value,password:o.querySelector("#su-password").value},n=await fetch(mos_auth_rest.signup,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});2===(await n.json()).status?(a.innerHTML='\n        <div class="modal-status modal-status-success">\n          Success! Your account has been created.\n        </div>\n      ',location.reload()):(t.removeAttribute("disabled"),a.innerHTML='\n        <div class="modal-status modal-status-danger">\n          Unable to create account! Please try again later.\n        </div>\n      ')})),n?.addEventListener("submit",(async e=>{e.preventDefault();const t=n.querySelector("fieldset"),a=n.querySelector("#signin-status");t.setAttribute("disabled",!0),a.innerHTML='\n      <div class="modal-status modal-status-info">\n        Please wait! We are logging you in.\n      </div>\n    ';const s={user_login:n.querySelector("#si-email").value,password:n.querySelector("#si-password").value},o=await fetch(mos_auth_rest.signin,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});2===(await o.json()).status?(a.innerHTML='\n        <div class="modal-status modal-status-success">\n          Success! You are now logged in.\n        </div>\n      ',location.reload()):(t.removeAttribute("disabled"),a.innerHTML='\n        <div class="modal-status modal-status-danger">\n          Invalid credentials! Please try again later.\n        </div>\n      ')}))}));